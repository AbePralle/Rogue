class Box( position:XY, size:XY ) [compound]
  ROUTINES
    routine create( x:Real, y:Real, width:Real, height:Real )->Box
      return Box( XY(x,y), XY(width,height) )

    routine create( width:Real, height:Real )->Box
      return Box( XY(0,0), XY(width,height) )

  METHODS
    method aligned_within( enclosing:Box, alignment:XY )->Box
      # -1..1 -> 0..1
      local align_x = alignment.x / 2 + 0.5
      local align_y = alignment.y / 2 + 0.5

      local excess_x = enclosing.width - width
      local excess_y = enclosing.height - height
      return Box( XY(enclosing.x + excess_x * align_x, enclosing.y + excess_y * align_y), size )

    method height->Real [macro]
      this.size.y

    method to->String
      return "[@$,$ $x$]" (x,y,width,height)

    method width->Real [macro]
      this.size.x

    method x->Real [macro]
      this.position.x

    method y->Real [macro]
      this.position.y

endClass
